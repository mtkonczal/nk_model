sim_multiple <- simulate_multiple_nk(sim_configs, Q = 20)
# Plot selected variables ("y", "p", "r") for simulation 1 and 2
plot2 <- plot_nk_output(sim_data = sim_multiple, vars = c("vt", "r", "y", "p","A"), sims = c(1, 2), scenario_titles = c("Test 1", "A second"))
print(plot2)
# Define simulation configurations with different Fed response setups.
sim_configs <- list(
list(
shock_period = c(5, 6, 5),
shock_value  = c(4, -4, -2),
shock_type   = c("vt", "vt", "A"),
fed_response = 1  # Full Fed response
),
list(
shock_period = c(5, 6),
shock_value  = c(4, -4),
shock_type   = c("vt", "vt"),
fed_response = 1  # Full Fed response
)
)
# Run multiple simulations using the configurations above.
sim_multiple <- simulate_multiple_nk(sim_configs, Q = 20)
# Plot selected variables ("y", "p", "r") for simulation 1 and 2
plot2 <- plot_nk_output(sim_data = sim_multiple, vars = c("vt", "r", "y", "p","A"), sims = c(1, 2), scenario_titles = c("Test 1", "A second"))
print(plot2)
# Define simulation configurations with different Fed response setups.
sim_configs <- list(
list(
shock_period = c(5, 6, 5),
shock_value  = c(4, -4, -1),
shock_type   = c("vt", "vt", "A"),
fed_response = 1  # Full Fed response
),
list(
shock_period = c(5, 6),
shock_value  = c(4, -4),
shock_type   = c("vt", "vt"),
fed_response = 1  # Full Fed response
)
)
# Run multiple simulations using the configurations above.
sim_multiple <- simulate_multiple_nk(sim_configs, Q = 20)
# Plot selected variables ("y", "p", "r") for simulation 1 and 2
plot2 <- plot_nk_output(sim_data = sim_multiple, vars = c("vt", "r", "y", "p","A"), sims = c(1, 2), scenario_titles = c("Test 1", "A second"))
print(plot2)
# Define simulation configurations with different Fed response setups.
sim_configs <- list(
list(
shock_period = c(5, 6, 7),
shock_value  = c(4, -4, -1),
shock_type   = c("vt", "vt", "A"),
fed_response = 1  # Full Fed response
),
list(
shock_period = c(5, 6),
shock_value  = c(4, -4),
shock_type   = c("vt", "vt"),
fed_response = 1  # Full Fed response
)
)
# Run multiple simulations using the configurations above.
sim_multiple <- simulate_multiple_nk(sim_configs, Q = 20)
# Plot selected variables ("y", "p", "r") for simulation 1 and 2
plot2 <- plot_nk_output(sim_data = sim_multiple, vars = c("vt", "r", "y", "p","A"), sims = c(1, 2), scenario_titles = c("Test 1", "A second"))
print(plot2)
# Define simulation configurations with different Fed response setups.
sim_configs <- list(
list(
shock_period = c(5, 6, 7),
shock_value  = c(4, -3, -3),
shock_type   = c("vt", "A", "A"),
fed_response = 1  # Full Fed response
),
list(
shock_period = c(5, 6),
shock_value  = c(4, -4),
shock_type   = c("vt", "vt"),
fed_response = 1  # Full Fed response
)
)
# Run multiple simulations using the configurations above.
sim_multiple <- simulate_multiple_nk(sim_configs, Q = 20)
# Plot selected variables ("y", "p", "r") for simulation 1 and 2
plot2 <- plot_nk_output(sim_data = sim_multiple, vars = c("vt", "r", "y", "p","A"), sims = c(1, 2), scenario_titles = c("Test 1", "A second"))
print(plot2)
# Define simulation configurations with different Fed response setups.
sim_configs <- list(
list(
shock_period = c(5, 6),
shock_value  = c(4, -4),
shock_type   = c("vt", "vt"),
fed_response = 1  # Full Fed response
),
list(
shock_period = c(5, 6),
shock_value  = c(4, -4),
shock_type   = c("vt", "vt"),
fed_response = 0  # Full Fed response
)
)
# Run multiple simulations using the configurations above.
sim_multiple <- simulate_multiple_nk(sim_configs, Q = 20)
# Plot selected variables ("y", "p", "r") for simulation 1 and 2
plot2 <- plot_nk_output(sim_data = sim_multiple, vars = c("vt", "r", "y", "p","A"), sims = c(1, 2), scenario_titles = c("Test 1", "A second"))
print(plot2)
# Run a single simulation with a supply shock (vt) of +1 at period 5 and a reversal (-1) at period 6,
# with full Fed response.
sim_single <- simulate_nk_model(
Q = 50,
shock_period = c(5, 6),
shock_value  = c(1, 1),
shock_type   = c("A", "A"),
fed_response = 1
)
# main.R
# Main driver script for the New Keynesian Model Simulation Project
# Clear the workspace
rm(list = ls())
# Source the necessary function files
source("R/nk_simulation.R")  # Contains simulate_nk_model() and simulate_multiple_nk()
source("R/nk_display_helper.R")
# Print explanations of model variables
explain_nk_variables()
# -----------------------
# Example 1: Single Simulation
# -----------------------
# Run a single simulation with a supply shock (vt) of +1 at period 5 and a reversal (-1) at period 6,
# with full Fed response.
sim_single <- simulate_nk_model(
Q = 50,
shock_period = c(5, 6),
shock_value  = c(1, 1),
shock_type   = c("A", "A"),
fed_response = 1
)
# Plot output for key variables: output (y), inflation (p), and real interest rate (r)
plot1 <- plot_nk_output(sim_data = sim_single, vars = c("y", "p", "r", "A"), sims = 1)
print(plot1)
# Run a single simulation with a supply shock (vt) of +1 at period 5 and a reversal (-1) at period 6,
# with full Fed response.
sim_single <- simulate_nk_model(
Q = 50,
shock_period = c(5, 6),
shock_value  = c(1, 1),
shock_type   = c("A", "A"),
fed_response = 0
)
# Plot output for key variables: output (y), inflation (p), and real interest rate (r)
plot1 <- plot_nk_output(sim_data = sim_single, vars = c("y", "p", "r", "A"), sims = 1)
print(plot1)
sim_single <- simulate_nk_model(
Q = 12,
shock_period = c(5, 6),
shock_value  = c(1, 1),
shock_type   = c("A", "A"),
fed_response = 0
)
# Plot output for key variables: output (y), inflation (p), and real interest rate (r)
plot1 <- plot_nk_output(sim_data = sim_single, vars = c("y", "p", "r", "A"), sims = 1)
print(plot1)
# main.R
# Main driver script for the New Keynesian Model Simulation Project
# Clear the workspace
rm(list = ls())
# Source the necessary function files
source("R/nk_simulation.R")  # Contains simulate_nk_model() and simulate_multiple_nk()
source("R/nk_display_helper.R")
# Print explanations of model variables
explain_nk_variables()
sim_single <- simulate_nk_model(
Q = 12,
shock_period = c(5, 6),
shock_value  = c(1, 1),
shock_type   = c("A", "A"),
fed_response = 0
)
# Plot output for key variables: output (y), inflation (p), and real interest rate (r)
plot1 <- plot_nk_output(sim_data = sim_single, vars = c("y", "p", "r", "A"), sims = 1)
print(plot1)
# Define simulation configurations with different Fed response setups.
sim_configs <- list(
list(
shock_period = c(5, 6),
shock_value  = c(4, 4),
shock_type   = c("vt", "vt"),
fed_response = 1  # Full Fed response
),
list(
shock_period = c(5, 6),
shock_value  = c(4, 4),
shock_type   = c("vt", "vt"),
fed_response = 0  # Full Fed response
)
)
# Run multiple simulations using the configurations above.
sim_multiple <- simulate_multiple_nk(sim_configs, Q = 20)
# Plot selected variables ("y", "p", "r") for simulation 1 and 2
plot2 <- plot_nk_output(sim_data = sim_multiple, vars = c("vt", "r", "y", "p","A"), sims = c(1, 2), scenario_titles = c("Test 1", "A second"))
print(plot2)
# Define simulation configurations with different Fed response setups.
sim_configs <- list(
list(
shock_period = c(5, 6),
shock_value  = c(4, 4),
shock_type   = c("vt", "vt"),
fed_response = 1  # Full Fed response
),
list(
shock_period = c(5, 6, 7, 8),
shock_value  = c(4, 4, -4, -4),
shock_type   = c("vt", "vt"),
fed_response = 0  # Full Fed response
)
)
# Run multiple simulations using the configurations above.
sim_multiple <- simulate_multiple_nk(sim_configs, Q = 20)
# Define simulation configurations with different Fed response setups.
sim_configs <- list(
list(
shock_period = c(5, 6),
shock_value  = c(4, 4),
shock_type   = c("vt", "vt"),
fed_response = 1  # Full Fed response
),
list(
shock_period = c(5, 6, 7, 8),
shock_value  = c(4, 4, -4, -4),
shock_type   = c("vt", "vt", "vt", "vt"),
fed_response = 0  # Full Fed response
)
)
# Run multiple simulations using the configurations above.
sim_multiple <- simulate_multiple_nk(sim_configs, Q = 20)
# Plot selected variables ("y", "p", "r") for simulation 1 and 2
plot2 <- plot_nk_output(sim_data = sim_multiple, vars = c("vt", "r", "y", "p","A"), sims = c(1, 2), scenario_titles = c("Test 1", "A second"))
print(plot2)
# Define simulation configurations with different Fed response setups.
sim_configs <- list(
list(
shock_period = c(5, 6),
shock_value  = c(4, 4),
shock_type   = c("vt", "vt"),
fed_response = 0  # Full Fed response
),
list(
shock_period = c(5, 6, 7, 8),
shock_value  = c(4, 4, -4, -4),
shock_type   = c("vt", "vt", "vt", "vt"),
fed_response = 0  # Full Fed response
)
)
# Run multiple simulations using the configurations above.
sim_multiple <- simulate_multiple_nk(sim_configs, Q = 20)
# Plot selected variables ("y", "p", "r") for simulation 1 and 2
plot2 <- plot_nk_output(sim_data = sim_multiple, vars = c("vt", "r", "y", "p","A"), sims = c(1, 2), scenario_titles = c("Test 1", "A second"))
print(plot2)
# main.R
# Main driver script for the New Keynesian Model Simulation Project
# Clear the workspace
rm(list = ls())
# Source the necessary function files
source("R/nk_simulation.R")  # Contains simulate_nk_model() and simulate_multiple_nk()
source("R/nk_display_helper.R")
# Print explanations of model variables
explain_nk_variables()
# -----------------------
# Example 1: Single Simulation
# -----------------------
# Define simulation configurations with different Fed response setups.
sim_configs <- list(
list(
shock_period = c(5, 6),
shock_value  = c(4, 4),
shock_type   = c("vt", "vt"),
fed_response = 0  # Full Fed response
),
list(
shock_period = c(5, 6, 7, 8),
shock_value  = c(4, 4, -4, -4),
shock_type   = c("vt", "vt", "vt", "vt"),
fed_response = 0  # Full Fed response
)
)
# Run multiple simulations using the configurations above.
sim_multiple <- simulate_multiple_nk(sim_configs, Q = 20)
# Plot selected variables ("y", "p", "r") for simulation 1 and 2
plot2 <- plot_nk_output(sim_data = sim_multiple, vars = c("vt", "r", "y", "p","A"), sims = c(1, 2), scenario_titles = c("Test 1", "A second"))
print(plot2)
# Define simulation configurations with different Fed response setups.
sim_configs <- list(
list(
shock_period = c(5, 6),
shock_value  = c(4, -4),
shock_type   = c("vt", "vt"),
fed_response = 1  # Full Fed response
),
list(
shock_period = c(5, 6),
shock_value  = c(4, -4),
shock_type   = c("vt", "vt"),
fed_response = 0  # Full Fed response
)
)
# Run multiple simulations using the configurations above.
sim_multiple <- simulate_multiple_nk(sim_configs, Q = 20)
# Plot selected variables ("y", "p", "r") for simulation 1 and 2
plot2 <- plot_nk_output(sim_data = sim_multiple, vars = c("vt", "r", "y", "p","A"), sims = c(1, 2), scenario_titles = c("Test 1", "A second"))
print(plot2)
# Plot selected variables ("y", "p", "r") for simulation 1 and 2
plot2 <- plot_nk_output(sim_data = sim_multiple, vars = c("vt", "r", "y", "p","A"), sims = c(1, 2), scenario_titles = c("Reversed Supply Shock, Fed Response", "Reversed Supply Shock, No Fed Response"))
print(plot2)
plot2 <- plot_nk_output(sim_data = sim_multiple, vars = c("vt", "r", "y", "p"), sims = c(1, 2), scenario_titles = c("Reversed Supply Shock, Fed Response", "Reversed Supply Shock, No Fed Response"))
print(plot2)
# Updated helper function to explain model variables.
explain_nk_variables <- function() {
cat("New Keynesian Model Variable Explanations:\n")
cat("-------------------------------------------------\n")
cat("A: Autonomous spending – exogenous demand in the economy.\n")
cat("pt: Inflation target – the central bank's desired inflation rate.\n")
cat("ye: Potential output – the economy's natural or potential level of output.\n")
cat("vt: Supply shock – exogenous shock affecting the supply side (e.g., cost shocks).\n")
cat("y: Output – the actual level of economic production/output.\n")
cat("p: Inflation – the actual rate of inflation over time.\n")
cat("rs: Stabilising (neutral) interest rate – the rate that keeps the economy at equilibrium.\n")
cat("r: Real interest rate – the actual interest rate, adjusted via the Fed's policy rule.\n")
cat("culminate_inflation: Cumulative inflation factor computed as the final value of cumprod((p/100) + 1).\n")
cat("culminate_growth: Cumulative growth factor for output, computed as final output divided by initial output.\n")
cat("\nAdditional Parameter:\n")
cat("fed_response: Multiplier indicating the strength of the Fed's reaction to the inflation gap.\n")
cat("               (1 = full response, 0 = no response)\n")
cat("-------------------------------------------------\n")
}
# Returns a named vector of colors for New Keynesian model variables.
get_nk_colors <- function() {
colors <- c(
"y"  = "#1f78b4",   # Output: cool blue
"p"  = "#33a02c",   # Inflation: cool green
"r"  = "#e31a1c",   # Real Interest Rate: cool red
"vt" = "#6a3d9a",   # Supply Shock: cool purple
"A"  = "#a6cee3",   # Autonomous Spending: light blue
"pt" = "#b2df8a",   # Inflation Target: light green
"ye" = "#fb9a99",   # Potential Output: light red/pink
"rs" = "#cab2d6"    # Stabilising Interest Rate: lavender
)
colors
}
# Returns a named vector of descriptive labels for model variables.
get_nk_variable_labels <- function() {
labels <- c(
"y"  = "Output",
"p"  = "Inflation",
"r"  = "Real Interest Rate",
"vt" = "Supply Shock",
"A"  = "Autonomous Spending",
"pt" = "Inflation Target",
"ye" = "Potential Output",
"rs" = "Stabilising Interest Rate"
)
labels
}
# Updated plotting function that facets by simulation and variable.
# It now uses get_nk_colors() for colors and get_nk_variable_labels() for facet labels.
plot_nk_output <- function(sim_data, vars, sims, scenario_titles = NULL) {
# Filter the data to include only the specified simulations.
df <- sim_data %>% filter(simulation %in% sims)
# Pivot the selected variables into long format.
df_long <- df %>%
pivot_longer(
cols = all_of(vars),
names_to = "variable",
values_to = "value"
) %>%
mutate(
simulation = factor(simulation),
variable = factor(variable, levels = vars)
)
# Get descriptive labels from helper function.
variable_labels <- get_nk_variable_labels()
# Create simulation labels if scenario_titles are provided.
if (!is.null(scenario_titles)) {
sim_levels <- levels(df_long$simulation)
if (length(scenario_titles) != length(sim_levels)) {
warning("Length of scenario_titles does not match number of simulations. Using default simulation labels.")
sim_labels <- waiver()
} else {
sim_labels <- setNames(scenario_titles, sim_levels)
}
} else {
sim_labels <- waiver()
}
# Build the ggplot.
p <- ggplot(df_long, aes(x = period, y = value, color = variable)) +
geom_line(size = 1) +
facet_grid(variable ~ simulation, scales = "free_y",
labeller = labeller(variable = variable_labels, simulation = sim_labels)) +
scale_color_manual(values = get_nk_colors()) +
labs(title = "New Keynesian Model Simulation",
x = "Period", y = "Value") +
theme_minimal() +
theme(
strip.text.y = element_text(angle = 0, size = 16),
strip.text.x = element_text(size = 16),
panel.border = element_rect(color = "black", fill = NA, size = 1),
panel.spacing = unit(0.5, "lines")
) +
theme(legend.position = "none") +
labs(caption = "Model via Mike Konczal")
p
}
plot2 <- plot_nk_output(sim_data = sim_multiple, vars = c("vt", "r", "y", "p"), sims = c(1, 2), scenario_titles = c("Reversed Supply Shock, Fed Response", "Reversed Supply Shock, No Fed Response"))
print(plot2)
# Plot selected variables ("y", "p", "r") for simulation 1 and 2
plot2 <- plot_nk_output(sim_data = sim_multiple, vars = c("vt", "r", "y", "p"), sims = c(1, 2), scenario_titles = c("Reversed Supply Shock, Fed Response", "Reversed Supply Shock, No Fed Response"))
plot2 <- plot2 + labs(title = "")
print(plot2)
# Plot selected variables ("y", "p", "r") for simulation 1 and 2
plot2 <- plot_nk_output(sim_data = sim_multiple, vars = c("vt", "r", "y", "p"), sims = c(1, 2), scenario_titles = c("Fed Response", "No Fed Response"))
plot2 <- plot2 + labs(title = "Figure 4: Supply Shocks That Reverse Themselves")
print(plot2)
View(simulate_nk_model)
# Define simulation configurations with different Fed response setups.
sim_configs <- list(
list(
shock_period = c(5, 6),
shock_value  = c(4, 4),
shock_type   = c("vt", "vt"),
fed_response = 0  # Full Fed response
),
list(
shock_period = c(5, 6, 7, 8),
shock_value  = c(4, 4, -4, -4),
shock_type   = c("vt", "vt", "vt", "vt"),
fed_response = 0  # Full Fed response
)
)
# Run multiple simulations using the configurations above.
sim_multiple <- simulate_multiple_nk(sim_configs, Q = 20)
# Plot selected variables ("y", "p", "r") for simulation 1 and 2
plot2 <- plot_nk_output(sim_data = sim_multiple, vars = c("vt", "r", "y", "p","A"), sims = c(1, 2), scenario_titles = c("Test 1", "A second"))
print(plot2)
# Define simulation configurations with different Fed response setups.
sim_configs <- list(
list(
shock_period = c(5),
shock_value  = c(4),
shock_type   = c("vt"),
fed_response = 0  # Full Fed response
),
list(
shock_period = c(5),
shock_value  = c(4),
shock_type   = c("vt"),
fed_response = 1  # Full Fed response
)
)
# Run multiple simulations using the configurations above.
sim_multiple <- simulate_multiple_nk(sim_configs, Q = 20)
# Plot selected variables ("y", "p", "r") for simulation 1 and 2
plot2 <- plot_nk_output(sim_data = sim_multiple, vars = c("vt", "r", "y", "p","A"), sims = c(1, 2), scenario_titles = c("Test 1", "A second"))
print(plot2)
# Define simulation configurations with different Fed response setups.
sim_configs <- list(
list(
shock_period = c(5,6),
shock_value  = c(4,-4),
shock_type   = c("vt"),
fed_response = 0  # Full Fed response
),
list(
shock_period = c(5),
shock_value  = c(4),
shock_type   = c("vt"),
fed_response = 0  # Full Fed response
)
)
# Run multiple simulations using the configurations above.
sim_multiple <- simulate_multiple_nk(sim_configs, Q = 20)
# Define simulation configurations with different Fed response setups.
sim_configs <- list(
list(
shock_period = c(5,6),
shock_value  = c(4,-4),
shock_type   = c("vt", "vt"),
fed_response = 0  # Full Fed response
),
list(
shock_period = c(5),
shock_value  = c(4),
shock_type   = c("vt"),
fed_response = 0  # Full Fed response
)
)
# Run multiple simulations using the configurations above.
sim_multiple <- simulate_multiple_nk(sim_configs, Q = 20)
# Plot selected variables ("y", "p", "r") for simulation 1 and 2
plot2 <- plot_nk_output(sim_data = sim_multiple, vars = c("vt", "r", "y", "p","A"), sims = c(1, 2), scenario_titles = c("Test 1", "A second"))
print(plot2)
plot2 <- plot_nk_output(sim_data = sim_multiple, vars = c("vt", "r", "y", "p"), sims = c(1, 2), scenario_titles = c("Test 1", "A second"))
print(plot2)
# Plot selected variables ("y", "p", "r") for simulation 1 and 2
plot2 <- plot_nk_output(sim_data = sim_multiple, vars = c("vt", "r", "y", "p"), sims = c(1, 2), scenario_titles = c("Reversed Shock", "Permanent Shock"))
plot2 <- plot2 + labs(title = "The Fed Sees Through Two Shocks: One to the Inflation Level, One to the Inflation Rate")
print(plot2)
# Plot selected variables ("y", "p", "r") for simulation 1 and 2
plot2 <- plot_nk_output(sim_data = sim_multiple, vars = c("vt", "r", "y", "p"), sims = c(1, 2), scenario_titles = c("Reversed Shock", "Permanent Shock"))
plot2 <- plot2 + labs(title = "The Fed Sees Through Two Shocks: One to the Inflation Level, One to the Inflation Rate") +
theme(plot.title.position = "plot")
print(plot2)
# Plot selected variables ("y", "p", "r") for simulation 1 and 2
plot2 <- plot_nk_output(sim_data = sim_multiple, vars = c("vt", "r", "y", "p"), sims = c(1, 2), scenario_titles = c("Reversed Shock", "Permanent Shock"))
plot2 <- plot2 + labs(title = "Figure 5: Fed Looks Through Two Shocks: One to the Level, One to the Rate") +
theme(plot.title.position = "plot")
print(plot2)
